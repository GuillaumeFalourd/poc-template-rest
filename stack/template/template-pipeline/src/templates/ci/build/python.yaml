variables:
  PYTHON_VERSION: 3.8.2
  PYTHON_REQUIREMENTS: requirements.txt
  PYTHON_PROJECT_PATH: "."

stages:
  - build

build:
  image: itau-docker-base.depdes.artifactory.prod.cloud.ihf/python:$PYTHON_VERSION
  stage: build
  before_script:
    - unset CI_COMMIT_TAG
  script:
    - cd $PYTHON_PROJECT_PATH
    - if test -f "$PYTHON_REQUIREMENTS"; then pip install -r $PYTHON_REQUIREMENTS -t libs; fi
  allow_failure: false
  artifacts:
    expire_in: 1 day
    paths:
      - ./libs
  # cache:
  #   key: build-cache
  #   paths:
  #     - ./libs
  tags:
    - ci
  except:
    variables:
      - $DISABLE_BUILD

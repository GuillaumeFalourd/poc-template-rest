name: Manage User
description: Manage user through the Go Rest API.
template: golang
templateRelease: 2.16.2
dockerImageBuilder: ritclizup/rit-go-builder
plugin: rest
inputs:
  - label: "GoRest Token:"
    name: rit_gorest_token
    type: text

  - label: 'Name:'
    name: rit_name
    type: text
    default: Guillaume

  - label: 'Gender:'
    name: rit_gender
    type: text
    default: male
    items:
      - "male"
      - "female"

  - label: 'Email:'
    name: rit_email
    type: text
    default: guillaume@test.com

steps:
  - name: create_user
    method: POST
    url: https://gorest.co.in/public/v1/users
    headers:
      Content-Type: application/json
      Accept: "application/json"
      Authorization: "$[[ Bearer ${{inputs.rit_gorest_token}} ]]"
    data:
      name: "${{inputs.rit_name}}"
      gender: "${{inputs.rit_gender}}"
      email: "${{inputs.rit_email}}"
      status: "active"

  - name: get_user
    method: GET
    url: https://gorest.co.in/public/v1/users/${{steps.create_user.data.id}}
    headers:
      Content-Type: application/json
      Accept: "application/json"
      Authorization: "$[[ Bearer ${{inputs.rit_gorest_token}} ]]"

  - name: update_user
    method: PATCH
    url: https://gorest.co.in/public/v1/users/${{steps.create_user.data.id}}
    headers:
      Content-Type: application/json
      Accept: "application/json"
      Authorization: "$[[ Bearer ${{inputs.rit_gorest_token}} ]]"
    data:
      name: "New"
      email: "new@gmail.com"
      status: "active"

  - name: delete_user
    method: DELETE
    url: https://gorest.co.in/public/v1/users/${{steps.create_user.data.id}}
    headers:
      Content-Type: application/json
      Accept: "application/json"
      Authorization: "$[[ Bearer ${{inputs.rit_gorest_token}} ]]"
